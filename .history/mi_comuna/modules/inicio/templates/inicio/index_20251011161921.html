{% extends "base.html" %}

{% block extra_head %}
  <!-- Fuente moderna -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow-x: hidden;
    }
    section { scroll-margin-top: 80px; }
  </style>
{% endblock %}

{% block content %}





<!-- HERO -->
<section class="relative h-screen w-full overflow-hidden">
  <video class="absolute inset-0 h-full w-full object-cover"
         poster="{{ url_for('static', filename='img/home.jpg') }}"
         autoplay muted loop playsinline></video>

  <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-indigo-900/60 to-transparent"></div>

  <div class="relative z-10 flex h-full items-center justify-center text-center px-6">
    <div class="max-w-2xl text-white">
      <span class="inline-block bg-white/20 px-3 py-1 text-xs font-semibold uppercase tracking-wider rounded">
        Comunidad & Emprendimiento
      </span>
      <h1 class="mt-4 text-4xl md:text-5xl font-extrabold leading-tight">
        Impulsa el comercio local de 
        <span class="text-yellow-400">{{ config.MUNICIPALITY_NAME or "Parral" }}</span>
      </h1>
      <p class="mt-4 text-base md:text-lg text-gray-200">
        Descubre, apoya y conecta con los negocios que dan vida a nuestra comuna.  
        Tu compra impulsa el crecimiento local 💪.
      </p>
      <div class="mt-8 flex flex-wrap justify-center gap-4">
        <a href="{{ url_for('negocios.lista_negocios') }}"
           class="bg-yellow-400 text-gray-900 px-6 py-3 rounded-lg font-medium shadow hover:bg-yellow-300 transition">
          🌟 Ver todos los negocios
        </a>
        <a href="{{ url_for('negocios.registrar') }}"
           class="bg-white/10 text-white border border-white px-6 py-3 rounded-lg hover:bg-white/20 transition">
          ➕ Agregar mi emprendimiento
        </a>
      </div>
    </div>
  </div>
</section>

<!-- MÉTRICAS -->
<section class="bg-white -mt-16 z-20 relative">
  <div class="mx-auto grid max-w-7xl grid-cols-2 gap-6 px-6 sm:grid-cols-4">
    {% set metricas = [
      {"icon":"🏬","valor": stats.negocios if stats and stats.negocios else 0,"label":"Negocios Activos","color":"blue"},
      {"icon":"👥","valor": stats.usuarios if stats and stats.usuarios else 0,"label":"Ciudadanos","color":"green"},
      {"icon":"⭐","valor": stats.resenas if stats and stats.resenas else 0,"label":"Reseñas","color":"orange"},
      {"icon":"🇨🇱","valor":"100%","label":"Local","color":"pink"}
    ] %}
    {% for m in metricas %}
      <div class="rounded-xl bg-white p-6 text-center shadow-lg hover:shadow-xl transition animate-fadeInUp">
        <div class="mx-auto mb-2 flex h-12 w-12 items-center justify-center rounded-lg bg-{{m.color}}-50 text-2xl">
          {{ m.icon }}
        </div>
        <p class="text-3xl font-extrabold text-{{m.color}}-600">{{ m.valor }}</p>
        <p class="text-gray-600 mt-1">{{ m.label }}</p>
      </div>
    {% endfor %}
  </div>
</section>

<!-- NEGOCIOS DESTACADOS -->
<section class="bg-gray-50 py-16">
  <div class="mx-auto max-w-7xl px-6 text-center">
    <h2 class="text-3xl font-bold text-gray-900">🌟 Negocios Destacados</h2>
    <p class="mt-2 text-gray-600">Descubre lo mejor que {{ config.MUNICIPALITY_NAME or "Parral" }} tiene para ti</p>

    <div class="mt-10 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {% for negocio in negocios %}
        <article class="group rounded-xl bg-white p-6 text-left shadow transition hover:-translate-y-1 hover:shadow-xl">
          <div class="aspect-video w-full overflow-hidden rounded-lg bg-gray-100 mb-4">
            {% if negocio.imagen %}
              <img src="{{ url_for('static', filename=negocio.imagen) }}" alt="{{ negocio.nombre }}" class="w-full h-full object-cover">
            {% else %}
              <div class="flex items-center justify-center h-full text-gray-400 text-sm">Sin imagen</div>
            {% endif %}
          </div>
          <h3 class="text-lg font-semibold text-gray-800">{{ negocio.nombre }}</h3>
          <p class="mt-2 line-clamp-2 text-gray-600">{{ negocio.descripcion }}</p>
          <a href="{{ url_for('negocios.detalle', id=negocio.id) }}"
             class="mt-4 inline-flex items-center gap-1 font-semibold text-blue-600 hover:underline">
            Ver más →
          </a>
        </article>
      {% else %}
        <p class="col-span-3 text-gray-500">⚠️ No hay negocios destacados todavía.</p>
      {% endfor %}
    </div>

    <a href="{{ url_for('negocios.lista_negocios') }}"
       class="mt-10 inline-block rounded-lg bg-purple-600 px-6 py-3 font-semibold text-white shadow hover:bg-purple-700">
      Ver todos los negocios →
    </a>
  </div>
</section>

<!-- CTA -->
<section class="relative overflow-hidden bg-gradient-to-r from-purple-700 to-blue-800 py-16 text-white">
  <div class="relative mx-auto flex max-w-7xl flex-col items-center justify-between gap-6 px-6 text-center md:flex-row md:text-left">
    <div class="max-w-2xl">
      <h3 class="text-2xl font-bold">🚀 Impulsa tu negocio en {{ config.MUNICIPALITY_NAME or "Parral" }}</h3>
      <p class="mt-2 text-purple-100">Registra tu emprendimiento y haz que toda la comuna lo descubra.</p>
    </div>
    <a href="{{ url_for('negocios.registrar') }}"
       class="animate-glow rounded-lg bg-yellow-500 px-6 py-3 font-semibold text-gray-900 shadow hover:bg-yellow-400">
      ➕ Registra tu negocio gratis
    </a>
  </div>
</section>

<!-- Kodesk Branding -->
<section class="bg-gradient-to-r from-gray-50 to-gray-100 py-16 mt-20 border-t border-gray-200">
  <div class="max-w-6xl mx-auto px-6 text-center animate-fadeIn">
    <div class="mb-10">
      <img src="{{ url_for('static', filename='img/kodesk.png') }}" 
           alt="Kodesk" 
           class="mx-auto h-16 md:h-20 mb-4 drop-shadow-sm hover:scale-105 transition-transform duration-300">
      <h3 class="text-2xl font-extrabold text-gray-800">
        🚀 kodesk.cl :: Consultora TI líder en la región
      </h3>
      <p class="text-gray-600 mt-2 max-w-xl mx-auto text-sm md:text-base">
        Impulsamos la innovación y el crecimiento de tu negocio con 
        <span class="font-semibold text-indigo-600">tecnología, estrategia digital</span> y plataformas de alto impacto.
      </p>
    </div>

    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-8 items-center justify-center">
      {% for logo in ['agrodesk.png', 'proyecttraker.png', 'leuco.png', 'vettraker.png', 'contrudesk.png'] %}
        <img src="{{ url_for('static', filename='img/' ~ logo) }}" alt="Plataforma {{ loop.index }}"
             class="h-12 mx-auto opacity-70 hover:opacity-100 hover:scale-110 transition-all duration-300">
      {% endfor %}
    </div>

    <p class="mt-10 text-xs text-gray-500">
      © {{ current_year }} <span class="font-semibold">kodesk.cl</span> · NUESTRAS PLATAFORMAS WEB
    </p>
  </div>
</section>


<!-- Kodesk Branding -->
<section class="bg-gradient-to-r from-gray-50 to-gray-100 py-16 mt-20 border-t border-gray-200 relative">
  <div class="max-w-6xl mx-auto px-6 text-center animate-fadeIn">

    <!-- 🏷️ Etiqueta de espacio publicitario -->
    <div class="absolute top-4 left-1/2 transform -translate-x-1/2">
      <span class="bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1 rounded-full shadow-sm uppercase tracking-wide">
        🏷️ Espacio Publicitario
      </span>
    </div>

    <!-- Contenido principal -->
    <div class="mb-10 mt-4">
      <img src="{{ url_for('static', filename='img/kodesk.png') }}" 
           alt="Kodesk" 
           class="mx-auto h-16 md:h-20 mb-4 drop-shadow-sm hover:scale-105 transition-transform duration-300">
      <h3 class="text-2xl font-extrabold text-gray-800">
        🚀 kodesk.cl :: Consultora TI líder en la región
      </h3>
      <p class="text-gray-600 mt-2 max-w-xl mx-auto text-sm md:text-base">
        Impulsamos la innovación y el crecimiento de tu negocio con 
        <span class="font-semibold text-indigo-600">tecnología, estrategia digital</span> y plataformas de alto impacto.
      </p>
    </div>

    <!-- Logotipos -->
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-8 items-center justify-center">
      {% for logo in ['agrodesk.png', 'proyecttraker.png', 'leuco.png', 'vettraker.png', 'contrudesk.png'] %}
        <img src="{{ url_for('static', filename='img/' ~ logo) }}" alt="Plataforma {{ loop.index }}"
             class="h-12 mx-auto opacity-70 hover:opacity-100 hover:scale-110 transition-all duration-300">
      {% endfor %}
    </div>

    <!-- Footer -->
    <p class="mt-10 text-xs text-gray-500">
      © {{ current_year }} <span class="font-semibold">kodesk.cl</span> · NUESTRAS PLATAFORMAS WEB
    </p>
  </div>
</section>


{% endblock %}
