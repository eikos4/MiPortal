{% extends "base.html" %}

{% block extra_head %}
  <!-- Fuente moderna -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
  </style>
{% endblock %}

{% block content %}

<!-- HERO -->
<section class="relative h-[80vh] min-h-[520px] w-full overflow-hidden">
  <!-- Video -->
  <video
    class="absolute inset-0 h-full w-full object-cover"
 
    poster="{{ url_for('static', filename='img/home.jpg') }}"
    autoplay muted loop playsinline
  ></video>

  <!-- Overlay -->
  <div class="absolute inset-0 bg-gradient-to-b from-black/50 via-purple-900/50 to-blue-900/70"></div>

  <!-- Contenido -->
  <div class="relative z-10 mx-auto flex h-full max-w-7xl items-center px-6">
    <div class="max-w-3xl text-white animate-fadeInUp">
      <span class="inline-block rounded-full bg-yellow-500 px-3 py-1 text-xs font-semibold uppercase tracking-wide">
        🌟 Plataforma Local
      </span>
      <h1 class="mt-4 text-4xl font-extrabold leading-tight md:text-6xl">
        Descubre lo mejor de <span class="text-yellow-400">{{ config.MUNICIPALITY_NAME or "Parral" }}</span>
      </h1>
      <p class="mt-4 text-lg text-gray-200 md:text-xl">
        Encuentra negocios, pymes y servicios únicos. Conecta con tu comunidad y apoya lo local.
      </p>

      <div class="mt-8 flex flex-wrap gap-4">
        <a href="{{ url_for('negocios.lista') }}"
           class="rounded-lg bg-yellow-500 px-6 py-3 font-semibold text-gray-900 shadow hover:bg-yellow-400">
          🛍️ Explorar Negocios
        </a>
        <a href="{{ url_for('negocios.registrar') }}"
           class="rounded-lg bg-purple-600 px-6 py-3 font-semibold text-white shadow hover:bg-purple-700">
          ➕ Registrar mi Negocio
        </a>
      </div>
    </div>
  </div>
</section>

<!-- MÉTRICAS -->
<section class="bg-white">
  <div class="mx-auto -mt-12 grid max-w-7xl grid-cols-2 gap-6 px-6 sm:grid-cols-4">
    {% set metricas = [
      {"icon":"🏬","valor": stats.negocios if stats and stats.negocios else 0,"label":"Negocios Activos","color":"blue"},
      {"icon":"👥","valor": stats.usuarios if stats and stats.usuarios else 0,"label":"Ciudadanos","color":"green"},
      {"icon":"⭐","valor": stats.resenas if stats and stats.resenas else 0,"label":"Reseñas","color":"orange"},
      {"icon":"🇨🇱","valor":"100%","label":"Local","color":"pink"}
    ] %}
    {% for m in metricas %}
      <div class="rounded-xl bg-white p-6 text-center shadow-lg hover:shadow-xl transition animate-fadeInUp" style="animation-delay: {{ loop.index0 * 0.05 }}s">
        <div class="mx-auto mb-2 flex h-12 w-12 items-center justify-center rounded-lg bg-{{m.color}}-50 text-2xl">
          {{ m.icon }}
        </div>
        <p class="text-3xl font-extrabold text-{{m.color}}-600">{{ m.valor }}</p>
        <p class="text-gray-600 mt-1">{{ m.label }}</p>
      </div>
    {% endfor %}
  </div>
</section>

<!-- NEGOCIOS DESTACADOS -->
<section class="bg-gray-50 py-16">
  <div class="mx-auto max-w-7xl px-6 text-center">
    <h2 class="text-3xl font-bold text-gray-900">🌟 Negocios Destacados</h2>
    <p class="mt-2 text-gray-600">Descubre lo mejor que {{ config.MUNICIPALITY_NAME or "Parral" }} tiene para ti</p>

    <div class="mt-10 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {% for negocio in negocios %}
  <article class="group rounded-xl bg-white p-6 text-left shadow transition hover:-translate-y-1 hover:shadow-xl">
    <div class="aspect-video w-full overflow-hidden rounded-lg bg-gray-100 mb-4">
      {% if negocio.imagen %}
        <img src="{{ url_for('static', filename=negocio.imagen) }}" 
             alt="{{ negocio.nombre }}" class="w-full h-full object-cover">
      {% else %}
        <div class="flex items-center justify-center h-full text-gray-400 text-sm">
          Sin imagen
        </div>
      {% endif %}
    </div>
    <h3 class="text-lg font-semibold text-gray-800">{{ negocio.nombre }}</h3>
    <p class="mt-2 line-clamp-2 text-gray-600">{{ negocio.descripcion }}</p>
    <a href="{{ url_for('negocios.detalle', id=negocio.id) }}"
       class="mt-4 inline-flex items-center gap-1 font-semibold text-blue-600 hover:underline">
      Ver más →
    </a>
  </article>
{% else %}
  <p class="col-span-3 text-gray-500">⚠️ No hay negocios destacados todavía.</p>
{% endfor %}

    </div>

    <a href="{{ url_for('negocios.lista') }}"
       class="mt-10 inline-block rounded-lg bg-purple-600 px-6 py-3 font-semibold text-white shadow hover:bg-purple-700">
      Ver todos los negocios →
    </a>
  </div>
</section>




<!-- CTA -->
<section class="relative overflow-hidden bg-gradient-to-r from-purple-700 to-blue-800 py-16 text-white">
  <div class="relative mx-auto flex max-w-7xl flex-col items-center justify-between gap-6 px-6 text-center md:flex-row md:text-left">
    <div class="max-w-2xl">
      <h3 class="text-2xl font-bold">🚀 Impulsa tu negocio en {{ config.MUNICIPALITY_NAME or "Parral" }}</h3>
      <p class="mt-2 text-purple-100">Registra tu emprendimiento y haz que toda la comuna lo descubra.</p>
    </div>
    <a href="{{ url_for('negocios.registrar') }}"
       class="animate-glow rounded-lg bg-yellow-500 px-6 py-3 font-semibold text-gray-900 shadow hover:bg-yellow-400">
      ➕ Registra tu negocio gratis
    </a>
  </div>
</section>
<!-- Branding Kodesk -->
<section class="bg-gray-100 py-12 mt-16">
  <div class="max-w-6xl mx-auto px-6 text-center">

    <!-- Logo y claim -->
    <div class="mb-8">
      <img src="{{ url_for('static', filename='img/kodesk.png') }}" 
           alt="Kodesk" 
           class="mx-auto h-16 md:h-20 mb-4">
      <h3 class="text-lg md:text-xl font-bold text-gray-800">
        🚀 Kodesk: Consultora TI líder en la región
      </h3>
      <p class="text-gray-600 text-sm mt-2">
        Innovación, tecnología y plataformas digitales para potenciar negocios locales.
      </p>
    </div>

    <!-- Plataformas (logos) -->
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-6 items-center justify-center">
      <img src="{{ url_for('static', filename='img/agrodesk.png') }}" alt="Plataforma 1" class="h-12 mx-auto grayscale hover:grayscale-0 transition">
      <img src="{{ url_for('static', filename='img/leuco.png') }}" alt="Plataforma 2" class="h-12 mx-auto grayscale hover:grayscale-0 transition">
      <img src="{{ url_for('static', filename='img/contrudesk.png') }}" alt="Plataforma 3" class="h-12 mx-auto grayscale hover:grayscale-0 transition">
      <img src="{{ url_for('static', filename='img/vettratker.png') }}" alt="Plataforma 4" class="h-12 mx-auto grayscale hover:grayscale-0 transition">
      <img src="{{ url_for('static', filename='img/proyectraker.png') }}" alt="Plataforma 5" class="h-12 mx-auto grayscale hover:grayscale-0 transition">
    </div>

    <!-- Nota legal -->
    <p class="mt-8 text-xs text-gray-500">
      © {{ current_year }} Kodesk. Todos los derechos reservados.
    </p>
  </div>
</section>


<!-- 🌟 Branding Kodesk -->
<section class="bg-gradient-to-r from-gray-50 to-gray-100 py-16 mt-20 border-t border-gray-200">
  <div class="max-w-6xl mx-auto px-6 text-center animate-fadeIn">

    <!-- Logo + Claim -->
    <div class="mb-10">
      <img src="{{ url_for('static', filename='img/kodesk.png') }}" 
           alt="Kodesk" 
           class="mx-auto h-16 md:h-20 mb-4 drop-shadow-sm hover:scale-105 transition-transform duration-300">
      <h3 class="text-2xl font-extrabold text-gray-800">
        🚀 kodesk.cl :: Consultora TI líder en la región
      </h3>
      <p class="text-gray-600 mt-2 max-w-xl mx-auto text-sm md:text-base">
        Impulsamos la innovación y el crecimiento de tu negocio con <span class="font-semibold text-indigo-600">tecnología, estrategia digital</span> y plataformas de alto impacto.
      </p>
    </div>

    <!-- Plataformas (logos con hover) -->
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-8 items-center justify-center">
      <img src="{{ url_for('static', filename='img/agrodesk.png') }}" alt="Plataforma 1" 
           class="h-12 mx-auto opacity-70 hover:opacity-100 hover:scale-110 transition-all duration-300">
      <img src="{{ url_for('static', filename='img/projecttraker.png') }}" alt="Plataforma 2" 
           class="h-12 mx-auto opacity-70 hover:opacity-100 hover:scale-110 transition-all duration-300">
      <img src="{{ url_for('static', filename='img/leuco.png') }}" alt="Plataforma 3" 
           class="h-12 mx-auto opacity-70 hover:opacity-100 hover:scale-110 transition-all duration-300">
      <img src="{{ url_for('static', filename='img/ve.png') }}" alt="Plataforma 4" 
           class="h-12 mx-auto opacity-70 hover:opacity-100 hover:scale-110 transition-all duration-300">
      <img src="{{ url_for('static', filename='img/kodesk.png') }}" alt="Plataforma 5" 
           class="h-12 mx-auto opacity-70 hover:opacity-100 hover:scale-110 transition-all duration-300">
    </div>

    <!-- Nota legal -->
    <p class="mt-10 text-xs text-gray-500">
      © {{ current_year }} <span class="font-semibold">kodesk.cl</span>. NUESTRAS PLATAFORMAS WEB
    </p>
  </div>
</section>





{% endblock %}

{% block extra_js %}
<script>
  // Animación reveal
  const revealers = document.querySelectorAll('.animate-fadeInUp, .animate-fadeIn');
  const io = new IntersectionObserver((entries) => {
    entries.forEach(e => {
      if (e.isIntersecting) {
        e.target.style.visibility = 'visible';
        e.target.classList.add("opacity-100","translate-y-0");
        io.unobserve(e.target);
      }
    });
  }, { threshold: .1 });

  revealers.forEach(el => {
    el.style.visibility = 'hidden';
    el.classList.add("opacity-0","translate-y-5","transition","duration-700");
    io.observe(el);
  });
</script>
{% endblock %}
